<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Happy Birthday Afrin üéÇ</title>
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&family=Poppins:wght@400;500;600;700;800&family=Libre+Baskerville:wght@400;700&family=Fredoka:wght@400;600;700&family=Kalam:wght@400;700&display=swap" rel="stylesheet">
<style>
/* ============================================================
   GLOBAL RESET
   ============================================================ */
*, *::before, *::after {
  margin: 0; padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

/* FIX 1: html/body completely locked ‚Äî no scroll, no swipe leak */
html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  position: fixed;
  top: 0; left: 0;
  /* Prevent ALL rubber-band / overscroll that reveals hidden pages */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: auto;
  /* NOTE: touch-action removed from body so knife drag works on mobile */
}

/* ============================================================
   PAGE SYSTEM ‚Äî all pages stacked, only .active shown
   ============================================================ */
.page {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 100%; height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  display: none !important;   /* HIDE completely */
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  touch-action: none;
}
.page.active {
  display: flex !important;
  visibility: visible;
  opacity: 1;
  pointer-events: auto;
  z-index: 10;
  touch-action: auto;
}

/* Transition overlay */
#ov {
  position: fixed; inset: 0;
  background: #FFD1DC;
  opacity: 0; pointer-events: none;
  z-index: 9998;
  transition: opacity 0.45s ease;
}
#ov.on { opacity: 1; pointer-events: all; }

/* ============================================================
   PAGE 1 ‚Äî LOADING / AIRPLANE
   ============================================================ */
#p1 {
  background: linear-gradient(180deg, #FFF5E4 0%, #FFE5D9 50%, #FFD1DC 100%);
  justify-content: center; align-items: center;
  font-family: 'Poppins', sans-serif;
  overflow: hidden;
}
.cloud { position: absolute; background: rgba(255,255,255,.65); border-radius: 100px; }
.cloud::before, .cloud::after { content: ''; position: absolute; background: rgba(255,255,255,.65); border-radius: 100px; }
.c1{width:100px;height:40px;top:20%;left:15%} .c1::before{width:50px;height:50px;top:-25px;left:15px} .c1::after{width:60px;height:40px;top:-20px;right:10px}
.c2{width:120px;height:50px;top:50%;right:20%} .c2::before{width:60px;height:60px;top:-30px;left:20px} .c2::after{width:70px;height:50px;top:-25px;right:15px}
.c3{width:90px;height:35px;bottom:30%;left:10%} .c3::before{width:45px;height:45px;top:-22px;left:12px} .c3::after{width:55px;height:35px;top:-18px;right:8px}
.c4{width:80px;height:30px;bottom:15%;right:25%} .c4::before{width:40px;height:40px;top:-20px;left:10px} .c4::after{width:50px;height:30px;top:-15px;right:5px}
.plane { position: absolute; top: 35%; left: -250px; width: clamp(130px,35vw,200px); animation: fly 4s ease-in-out forwards; z-index: 5; }
@keyframes fly { from { left: -250px; } to { left: 110%; } }
.p1txt { position: absolute; bottom: 22%; width: 100%; text-align: center; opacity: 0; animation: ftxt 1s ease-out 2s forwards; padding: 0 20px; }
@keyframes ftxt { from { opacity:0; transform: translateY(15px); } to { opacity:1; transform: none; } }
.p1txt span { font-size: clamp(16px, 4.5vw, 26px); font-weight: 700; color: #C85A54; text-shadow: 2px 2px 6px rgba(0,0,0,.18); }

/* ============================================================
   PAGE 2
   ============================================================ */
#p2 { background: linear-gradient(180deg, #FFF5E4, #FFE5D9); font-family: 'Poppins', sans-serif; padding: 20px; }
.p2box { max-width: 560px; width: 100%; position: relative; z-index: 5; margin: auto; }
.p2sun { position: absolute; top: -10px; left: 10px; width: clamp(55px,15vw,72px); height: clamp(55px,15vw,72px); background: #F4D03F; border-radius: 50%; box-shadow: 0 0 35px rgba(244,208,63,.6); }
.p2wel { font-family: 'Caveat', cursive; font-size: clamp(20px,5vw,32px); color: #E07A5F; text-align: center; padding-top: clamp(45px,12vw,65px); }
.p2row { display: flex; align-items: center; justify-content: center; gap: 10px; margin: 20px 0 16px; }
.p2title { font-size: clamp(36px,10vw,56px); font-weight: 700; font-style: italic; color: #D04E3C; text-shadow: 2px 2px 0 rgba(0,0,0,.07); }
.p2hearts { display: flex; flex-direction: column; gap: 4px; }
.p2h { font-size: clamp(22px,6vw,30px); animation: hb 1.5s infinite; }
@keyframes hb { 0%,100%{transform:scale(1)} 50%{transform:scale(1.22)} }
.p2card { background: #D4E9D7; border: 4px solid #C9D5C4; border-radius: 22px; padding: clamp(22px,6vw,42px) clamp(18px,5vw,36px); box-shadow: 0 10px 30px rgba(0,0,0,.13); }
.p2dots { display: flex; gap: 9px; margin-bottom: 22px; }
.p2dot { width: 15px; height: 15px; border-radius: 50%; }
.d1{background:#E07A5F} .d2{background:#F4D03F} .d3{background:#81C784}
.p2msg { font-size: clamp(16px,4.5vw,22px); color: #2C3E50; text-align: center; line-height: 1.6; margin-bottom: 22px; font-weight: 500; }
.p2tap { font-family: 'Caveat', cursive; font-size: clamp(18px,5vw,28px); color: #E07A5F; text-align: center; margin-bottom: 20px; font-weight: 600; }
.gbtn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; border: none; cursor: pointer; font-family: 'Poppins', sans-serif; font-weight: 700; border-radius: 50px; transition: transform .15s; }
.gbtn:active { transform: scale(.96); }
.p2btn { background: #E07A5F; color: #fff; padding: clamp(13px,3.5vw,19px) clamp(28px,8vw,52px); font-size: clamp(16px,4.5vw,24px); box-shadow: 0 8px 24px rgba(224,122,95,.4); animation: blink 1.5s infinite; display: flex; margin: 0 auto; }
@keyframes blink { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.65;transform:scale(.96)} }
.p2btn:active { animation: none; }

/* ============================================================
   PAGE 3
   ============================================================ */
#p3 { background: linear-gradient(180deg, #FFF5E4, #FFE5D9); font-family: 'Poppins', sans-serif; padding: 20px; }
.p3sun { position: fixed; top: 35px; left: 35px; width: clamp(60px,14vw,85px); height: clamp(60px,14vw,85px); background: #F4D03F; border-radius: 50%; box-shadow: 0 0 45px rgba(244,208,63,.6); z-index: 2; }
.p3box { max-width: 640px; width: 100%; text-align: center; position: relative; z-index: 5; margin: auto; }
.p3sub { font-family: 'Caveat', cursive; font-size: clamp(22px,5.5vw,38px); color: #E07A5F; margin-bottom: 10px; }
.p3title { font-size: clamp(32px,9vw,60px); font-weight: 700; font-style: italic; color: #D04E3C; margin-bottom: 26px; text-shadow: 2px 2px 0 rgba(0,0,0,.07); }
.p3card { background: linear-gradient(135deg, #FFF9E6, #FFECB3); border: 5px solid #D4AF37; border-radius: 28px; padding: clamp(28px,6vw,52px) clamp(18px,5vw,48px); box-shadow: 0 18px 55px rgba(0,0,0,.22); position: relative; }
.pdh { position: absolute; font-size: 28px; animation: dhf 3s ease-in-out infinite; }
.dh1{top:14px;left:14px} .dh2{top:14px;right:14px;animation-delay:.5s} .dh3{bottom:14px;left:14px;animation-delay:1s} .dh4{bottom:14px;right:14px;animation-delay:1.5s}
@keyframes dhf { 0%,100%{transform:translateY(0) scale(1)} 50%{transform:translateY(-9px) scale(1.1)} }
.p3icon { font-size: clamp(68px,16vw,100px); margin-bottom: 18px; animation: iconb 2s ease-in-out infinite; }
@keyframes iconb { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-14px)} }
.p3msg { font-size: clamp(16px,4vw,22px); color: #6B4423; margin-bottom: 22px; font-weight: 500; line-height: 1.55; }
.p3click { font-size: clamp(16px,4.5vw,26px); color: #6B4423; margin-bottom: 22px; }
.p3btn { background: linear-gradient(135deg,#FFD700,#FFA500); color: #8B4C39; border: 3px solid #FF8C00; padding: clamp(12px,3.5vw,20px) clamp(36px,9vw,76px); font-size: clamp(18px,5vw,30px); box-shadow: 0 10px 32px rgba(255,165,0,.48); }
.psp { position: absolute; font-size: 20px; animation: spa 2s ease-in-out infinite; pointer-events: none; }
.sp1{top:8%;left:8%} .sp2{top:8%;right:8%;animation-delay:.5s} .sp3{bottom:8%;left:8%;animation-delay:1s} .sp4{bottom:8%;right:8%;animation-delay:1.5s}
@keyframes spa { 0%,100%{transform:scale(0) rotate(0);opacity:0} 50%{transform:scale(1.2) rotate(180deg);opacity:1} }

/* ============================================================
   PAGE 4
   ============================================================ */
#p4 { background: linear-gradient(135deg,#FFE5D9,#FFF5E4,#FFE5D9); font-family: 'Poppins', sans-serif; padding: 15px; }
.p4wrap { max-width: 710px; width: 100%; background: linear-gradient(135deg,#FFF9E6,#FFECB3); border: 6px solid #E5C899; border-radius: 24px; padding: clamp(18px,4vw,32px); box-shadow: 0 22px 65px rgba(0,0,0,.27); position: relative; z-index: 5; margin: auto; }
.p4hd { text-align: center; margin-bottom: 18px; padding-bottom: 16px; border-bottom: 3px solid rgba(224,122,95,.28); }
.p4hdt { font-family: 'Caveat', cursive; font-size: clamp(18px,4.5vw,30px); color: #D04E3C; margin-bottom: 10px; line-height: 1.3; }
.p4title { font-size: clamp(24px,6vw,44px); font-weight: 700; font-style: italic; color: #D04E3C; }
.p4body { background: rgba(255,255,255,.72); padding: clamp(18px,4vw,32px); border-radius: 15px; border: 3px solid #E5C899; position: relative; overflow: hidden; }
.p4body::before { content:''; position: absolute; inset: 0; background-image: radial-gradient(circle,rgba(224,122,95,.12) 1px,transparent 1px); background-size: 20px 20px; pointer-events: none; }
.p4gr { font-family: 'Caveat', cursive; font-size: clamp(24px,6vw,34px); color: #D04E3C; margin-bottom: 16px; text-align: center; position: relative; z-index: 2; }
.p4lt { font-family: 'Libre Baskerville', serif; font-size: clamp(13px,3.3vw,17px); color: #4a3f35; line-height: 1.8; margin-bottom: 13px; text-align: center; position: relative; z-index: 2; }
.p4wish { text-align: center; margin: 22px 0 16px; padding: 18px; background: linear-gradient(135deg,#FFE5D9,#FFD1DC); border-radius: 16px; border: 3px solid #E07A5F; position: relative; overflow: hidden; min-height: 100px; }
.p4wb { position: absolute; font-size: 28px; cursor: pointer; animation: wbr linear; z-index: 1; }
@keyframes wbr { from{bottom:-35px;opacity:0} 10%{opacity:1} to{bottom:120px;opacity:0} }
.p4wbt { font-family: 'Caveat', cursive; font-size: clamp(28px,7vw,40px); color: #D04E3C; font-weight: 700; position: relative; z-index: 2; }
.p4popped { animation: popp .3s ease-out forwards !important; }
@keyframes popp { 0%{transform:scale(1);opacity:1} 50%{transform:scale(1.5)} 100%{transform:scale(0);opacity:0} }
.p4sig { font-family: 'Caveat', cursive; font-size: clamp(16px,4vw,22px); color: #6B4423; text-align: center; margin-top: 14px; font-style: italic; }
.p4btn { display: block; margin: 22px auto 0; background: linear-gradient(135deg,#FFD700,#FFA500); color: #8B4C39; border: 3px solid #FF8C00; font-size: clamp(18px,5vw,28px); padding: clamp(13px,3.5vw,18px) clamp(36px,9vw,60px); animation: blink 1.5s infinite; }
.p4btn:active { animation: none; }

/* ============================================================
   PAGE 5
   ============================================================ */
#p5 { background: linear-gradient(135deg,#FFE5D9,#FFD1DC,#FFE5D9); font-family: 'Poppins', sans-serif; justify-content: center; }
.p5box { text-align: center; padding: 20px; position: relative; z-index: 5; }
.p5sub { font-family: 'Caveat', cursive; font-size: clamp(26px,7vw,42px); color: #E07A5F; margin-bottom: 12px; animation: fadedown 1s ease-out; }
@keyframes fadedown { from{opacity:0;transform:translateY(-35px)} to{opacity:1;transform:none} }
.p5title { font-size: clamp(38px,11vw,68px); font-weight: 800; color: #D04E3C; margin-bottom: 16px; text-shadow: 3px 3px 0 rgba(0,0,0,.09); animation: bouncein 1.2s ease-out .3s both; }
@keyframes bouncein { 0%{opacity:0;transform:scale(.3)} 50%{opacity:1;transform:scale(1.1)} 70%{transform:scale(.9)} 100%{transform:scale(1)} }
.p5cakewrap { position: relative; margin: 16px auto; animation: cakeapp 1.5s ease-out .6s both; }
@keyframes cakeapp { 0%{opacity:0;transform:translateY(70px) scale(0)} 60%{transform:translateY(-14px) scale(1.08)} 100%{opacity:1;transform:none} }
.p5emoji { font-size: clamp(85px,22vw,128px); display: inline-block; animation: cakef 3s ease-in-out infinite; filter: drop-shadow(0 10px 28px rgba(0,0,0,.18)); }
@keyframes cakef { 0%,100%{transform:translateY(0) rotate(-2deg)} 50%{transform:translateY(-16px) rotate(2deg)} }
.p5msg { font-size: clamp(16px,4.5vw,26px); color: #6B4423; margin: 18px 0; font-weight: 600; animation: fadein 1.5s ease-out .9s both; }
@keyframes fadein { from{opacity:0} to{opacity:1} }
.p5btn { background: linear-gradient(135deg,#FF6B9D,#FFA07A); color: #fff; border: 4px solid #FF1493; font-size: clamp(18px,5vw,30px); padding: clamp(14px,3.8vw,21px) clamp(36px,10vw,68px); box-shadow: 0 14px 38px rgba(255,107,157,.48); animation: pulse 2s infinite, fadein 1.8s ease-out 1.2s both; }
@keyframes pulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.05)} }
.p5btn:active { animation: none; transform: scale(.97); }

/* ============================================================
   PAGE 6 ‚Äî CAKE CUTTING
   ============================================================ */
#p6 {
  background: linear-gradient(135deg,#FFE5E5,#FFD5E5);
  font-family: 'Segoe UI', sans-serif;
  justify-content: center; align-items: center;
  overflow: hidden;
}
.p6instr { position: absolute; top: 20px; text-align: center; width: 90%; z-index: 20; }
.p6itxt { font-size: clamp(13px,3.8vw,17px); color: #C53A6E; font-weight: 700; }

/* cake scene */
.p6scene { position: relative; display: flex; align-items: center; justify-content: center; width: min(380px,90vw); height: min(400px,72vh); margin-top: 55px; z-index: 10; }
.p6candlerow { position: absolute; top: clamp(50px,12vw,72px); width: 100%; display: flex; justify-content: center; gap: clamp(32px,8vw,52px); z-index: 15; }
.p6candle { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
.p6candle:active { transform: scale(.93); }
.p6flame { width: 15px; height: 24px; background: linear-gradient(180deg,#FFD700,#FFA500 50%,#FF6347); border-radius: 50% 50% 50% 50%/60% 60% 40% 40%; animation: ff .4s infinite alternate; box-shadow: 0 0 12px #FFD700, 0 0 24px #FFA500; transition: opacity .5s, transform .5s; }
@keyframes ff { 0%{transform:scale(1) translateY(0)} 100%{transform:scale(1.05) translateY(-3px)} }
.p6flame.out { opacity: 0; transform: scale(.4) translateY(-22px); }
.p6smoke { position: absolute; top: 0; width: 10px; height: 20px; background: rgba(150,150,150,.55); border-radius: 50%; animation: smk 2s ease-out forwards; }
@keyframes smk { 0%{opacity:.7;transform:translateY(0) scale(1)} 100%{opacity:0;transform:translateY(-52px) scale(2.5)} }
.p6stick { width: 9px; height: clamp(32px,8vw,48px); background: linear-gradient(90deg,#FFF59D,#FFE082); border-radius: 2px; margin-top: 3px; }
.p6cake { position: relative; width: clamp(200px,52vw,265px); height: clamp(120px,22vh,150px); background: linear-gradient(180deg,#FF69B4,#FF1493); border-radius: 8px 8px 4px 4px; box-shadow: 0 10px 28px rgba(0,0,0,.28); transition: box-shadow .8s; overflow: hidden; }
.p6cake.glow { box-shadow: 0 10px 28px rgba(0,0,0,.28), 0 0 38px rgba(255,105,180,.6), 0 0 58px rgba(255,20,147,.38); }
.p6frost { position: absolute; top: 0; left: 0; width: 100%; height: 30px; background: #FFB6D9; display: flex; align-items: flex-end; }
.p6sc { width: 36px; height: 17px; background: white; border-radius: 0 0 50% 50%; margin: 0 -2px; }
.p6sline { position: absolute; top: 0; left: 50%; width: 3px; height: 100%; background: linear-gradient(180deg,#FFD700,#FFA500); opacity: 0; box-shadow: 0 0 16px #FFD700; transition: opacity .3s; z-index: 20; }
.p6sline.on { opacity: 1; }
.p6half { position: absolute; top: 0; width: 50%; height: 100%; background: linear-gradient(180deg,#FF69B4,#FF1493); overflow: hidden; transition: transform 1s cubic-bezier(0.68,-0.55,0.265,1.55); }
.p6hl { left: 0; border-radius: 8px 0 4px 4px; transform-origin: right center; }
.p6hr { right: 0; border-radius: 0 8px 4px 4px; transform-origin: left center; }
.p6cake.split .p6hl { transform: translateX(-44px) rotate(-10deg); }
.p6cake.split .p6hr { transform: translateX(44px) rotate(10deg); }
.p6crumb { position: absolute; width: 4px; height: 4px; background: #FF69B4; border-radius: 50%; animation: crumb 1.4s ease-out forwards; }
@keyframes crumb { 0%{opacity:1;transform:translateY(0)} 100%{opacity:0;transform:translateY(85px)} }

/* =========================================================
   KNIFE ‚Äî always rendered, slides in when candles blown
   ========================================================= */
#knife {
  position: fixed;
  left: -320px;
  top: 50%;
  width: clamp(150px,38vw,200px);
  height: 58px;
  cursor: grab;
  opacity: 0;
  z-index: 99999;
  touch-action: none;
  pointer-events: none;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,.32));
  transform: translateY(-50%);
  transition: left 1.1s cubic-bezier(0.34,1.56,0.64,1), opacity 1.1s ease-out;
  display: block !important;
  visibility: visible !important;
}
#knife.show {
  left: clamp(8px,2vw,20px);
  opacity: 1;
  pointer-events: auto;
  cursor: grab;
}
#knife.dragging {
  cursor: grabbing;
  transition: none !important;
}

/* confetti & surprise btn */
.p6cc { position: fixed; inset: 0; pointer-events: none; z-index: 50; }
.p6conf { position: absolute; width: 10px; height: 10px; opacity: 0; border-radius: 2px; }
@keyframes cburst { 0%{opacity:1;transform:translateY(0) rotate(0) scale(0)} 10%{opacity:1;transform:translateY(-85px) rotate(180deg) scale(1)} 100%{opacity:0;transform:translateY(100vh) rotate(720deg) scale(.5)} }
.p6sbtn { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%) scale(0); padding: clamp(13px,3.5vw,19px) clamp(28px,8vw,48px); background: linear-gradient(135deg,#FF6B9D,#FFA07A,#FFD700); border: none; border-radius: 50px; font-size: clamp(15px,4vw,21px); font-weight: 700; color: #fff; cursor: pointer; opacity: 0; z-index: 25; animation: sbglow 2s ease-in-out infinite; }
.p6sbtn.show { animation: sbapp .8s cubic-bezier(0.68,-0.55,0.265,1.55) .4s forwards, sbglow 2s ease-in-out infinite 1.2s; }
@keyframes sbapp { to{transform:translate(-50%,-50%) scale(1);opacity:1} }
@keyframes sbglow { 0%,100%{box-shadow:0 10px 28px rgba(255,107,157,.5)} 50%{box-shadow:0 10px 38px rgba(255,107,157,.8),0 0 55px rgba(255,215,0,.55)} }

/* ============================================================
   PAGE 7 ‚Äî FLIP CARDS
   (display:block so internal scroll works independently)
   ============================================================ */
#p7 { background: linear-gradient(135deg,#FFE5E5,#FFD5E5,#FFF0F5); font-family: 'Fredoka', sans-serif; display: none !important; overflow-y: auto !important; align-items: flex-start !important; }
#p7.active { display: block !important; }
.p7wrap { max-width: 570px; margin: 0 auto; padding: 20px; position: relative; z-index: 5; }
.p7hd { text-align: center; margin-bottom: 24px; }
.p7sm { font-size: 14px; color: #999; font-style: italic; margin-bottom: 5px; }
.p7title { font-size: clamp(20px,5.5vw,28px); font-weight: 600; color: #FF1493; text-shadow: 2px 2px 0 rgba(255,182,193,.28); margin-bottom: 10px; line-height: 1.4; }
.p7hint { font-size: 13px; color: #C53A6E; }
.p7cards { display: flex; flex-direction: column; gap: 20px; }
.p7cw { perspective: 1000px; animation: cslide .6s ease-out backwards; }
.p7cw:nth-child(1){animation-delay:.15s} .p7cw:nth-child(2){animation-delay:.3s} .p7cw:nth-child(3){animation-delay:.45s}
@keyframes cslide { from{opacity:0;transform:translateX(-38px)} to{opacity:1;transform:none} }
.p7fc { position: relative; width: 100%; height: clamp(190px,48vw,240px); cursor: pointer; transform-style: preserve-3d; transition: transform .6s cubic-bezier(0.68,-0.55,0.265,1.55); }
.p7fc.flipped { transform: rotateY(180deg); }
.p7face { position: absolute; inset: 0; backface-visibility: hidden; border-radius: 16px; box-shadow: 0 8px 24px rgba(0,0,0,.18); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 16px; overflow: hidden; }
.p7front { background: linear-gradient(135deg,#FFB6D9,#FFD1DC); }
.cf1{background:linear-gradient(135deg,#FFB6D9,#FFC0E3)} .cf2{background:linear-gradient(135deg,#B4F8C8,#A0E7E5)} .cf3{background:linear-gradient(135deg,#E6C9F0,#D4A5E8)}
.p7ill { width: clamp(95px,24vw,130px); height: clamp(95px,24vw,130px); margin-bottom: 10px; filter: drop-shadow(0 4px 9px rgba(0,0,0,.13)); }
.p7chint { font-size: clamp(13px,3.5vw,17px); font-weight: 600; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,.18); }
.p7back { background: #fff; transform: rotateY(180deg); padding: 22px; }
.p7cmsg { font-size: clamp(15px,3.8vw,18px); color: #333; text-align: center; line-height: 1.65; margin-bottom: 18px; }
.p7fbtn { background: linear-gradient(135deg,#FFB6D9,#FF69B4); color: #fff; border: none; padding: 9px 22px; border-radius: 26px; font-size: clamp(12px,2.8vw,14px); font-weight: 600; cursor: pointer; font-family: 'Fredoka', sans-serif; }
.p7sp { position: absolute; font-size: 17px; animation: spa 2s ease-in-out infinite; }
.sp1{top:8px;left:8px} .sp2{top:8px;right:8px;animation-delay:.5s} .sp3{bottom:8px;left:8px;animation-delay:1s} .sp4{bottom:8px;right:8px;animation-delay:1.5s}
.p7nextbox { text-align: center; margin-top: 32px; padding-bottom: 32px; }
.p7nbtn { background: linear-gradient(135deg,#FF6B9D,#FFA07A); color: #fff; border: none; padding: clamp(13px,3.5vw,17px) clamp(28px,8vw,42px); border-radius: 50px; font-size: clamp(17px,4.5vw,21px); font-weight: 700; cursor: pointer; font-family: 'Fredoka', sans-serif; animation: pulse 2s infinite; box-shadow: 0 10px 28px rgba(255,107,157,.48); }
.p7nbtn:active { animation: none; transform: scale(.97); }

/* ============================================================
   PAGE 8 ‚Äî CATCH THE HEART
   ============================================================ */
#p8 { background: linear-gradient(135deg,#F5E6D3,#FFD5E5); font-family: 'Poppins', sans-serif; justify-content: center; overflow: hidden; }
.p8top { position: absolute; top: clamp(28px,7vh,52px); text-align: center; width: 88%; }
.p8itxt { font-size: clamp(13px,3.5vw,18px); font-weight: 700; color: #c94b4b; letter-spacing: .8px; text-transform: uppercase; line-height: 1.4; }
.p8card { width: clamp(270px,72vw,335px); height: clamp(270px,72vw,335px); background: #fff; border-radius: 18px; box-shadow: 0 18px 55px rgba(0,0,0,.14); display: flex; align-items: center; justify-content: center; position: relative; animation: scin .8s cubic-bezier(0.68,-0.55,0.265,1.55); }
@keyframes scin { from{opacity:0;transform:scale(.8)} to{opacity:1;transform:scale(1)} }
.p8cz { position: absolute; width: clamp(105px,28vw,140px); height: clamp(105px,28vw,140px); border-radius: 50%; border: 3px dashed rgba(201,75,75,.2); pointer-events: none; transition: all .3s; }
.p8cz.active { border-color: rgba(201,75,75,.5); transform: scale(1.1); }
.p8heart { width: clamp(62px,16vw,78px); height: clamp(62px,16vw,78px); position: absolute; cursor: grab; user-select: none; animation: p8hf 3s ease-in-out infinite; filter: drop-shadow(0 7px 17px rgba(255,105,180,.4)); }
@keyframes p8hf { 0%,100%{transform:translateY(0) rotate(-5deg)} 50%{transform:translateY(-13px) rotate(5deg)} }
.p8heart.dragging { cursor: grabbing; transform: scale(1.15); animation: none; z-index: 999; }
.p8heart.caught { animation: hp .6s ease-out; filter: drop-shadow(0 0 28px rgba(255,105,180,.85)); }
@keyframes hp { 0%,100%{transform:scale(1)} 50%{transform:scale(1.3)} }
.p8glow { position: absolute; width: clamp(155px,40vw,190px); height: clamp(155px,40vw,190px); border-radius: 50%; background: radial-gradient(circle,rgba(255,105,180,.3),transparent); opacity: 0; pointer-events: none; transition: opacity .6s; }
.p8glow.on { opacity: 1; }
.p8helper { position: absolute; bottom: clamp(22px,5.5vh,46px); text-align: center; width: 85%; }
.p8helper p { font-size: clamp(12px,3vw,15px); color: #aaa; }

/* ============================================================
   PAGE 9 ‚Äî FINAL LETTER
   ============================================================ */
#p9 { background: linear-gradient(135deg,#FFF5E4,#FFE5D9); font-family: 'Kalam', cursive; padding: 20px; display: none !important; overflow-y: auto !important; align-items: flex-start !important; }
#p9.active { display: block !important; }
.p9wrap { max-width: 610px; margin: 0 auto; position: relative; z-index: 5; }
.p9hd { text-align: center; margin-bottom: 22px; }
.p9sub { font-family: 'Caveat', cursive; font-size: clamp(20px,5vw,29px); color: #E07A5F; margin-bottom: 7px; }
.p9title { font-family: 'Caveat', cursive; font-size: clamp(35px,9vw,50px); font-weight: 700; color: #D04E3C; font-style: italic; }
.p9card { background: linear-gradient(135deg,#FFB6D9,#FFC0E3); border-radius: 20px; padding: clamp(20px,5vw,32px); box-shadow: 0 14px 48px rgba(0,0,0,.19); }
.p9ch { display: flex; align-items: center; gap: 12px; margin-bottom: 22px; }
.p9env { width: clamp(46px,11vw,56px); height: clamp(46px,11vw,56px); background: #D04E3C; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: clamp(22px,5.5vw,28px); flex-shrink: 0; }
.p9ctitle { font-family: 'Caveat', cursive; font-size: clamp(24px,6vw,36px); font-weight: 700; color: #D04E3C; font-style: italic; }
.p9content { background: rgba(255,255,255,.92); border-radius: 16px; padding: clamp(18px,4vw,28px); margin-bottom: 20px; max-height: clamp(310px,48vh,420px); overflow-y: auto; }
.p9content::-webkit-scrollbar{width:7px} .p9content::-webkit-scrollbar-track{background:rgba(0,0,0,.04);border-radius:10px} .p9content::-webkit-scrollbar-thumb{background:#FFB6D9;border-radius:10px}
.p9gr { font-family: 'Caveat', cursive; font-size: clamp(22px,5.5vw,30px); color: #D04E3C; margin-bottom: 14px; }
.p9lt { font-size: clamp(13px,3.3vw,16px); color: #333; line-height: 1.8; margin-bottom: 12px; }
.p9btns { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
.p9btn { flex: 1; min-width: 115px; padding: clamp(12px,3vw,16px) clamp(22px,7vw,38px); border: none; border-radius: 50px; font-size: clamp(17px,4.5vw,21px); font-weight: 700; cursor: pointer; font-family: 'Kalam', cursive; box-shadow: 0 7px 22px rgba(0,0,0,.18); }
.p9yes { background: linear-gradient(135deg,#D04E3C,#FF6B6B); color: #fff; }
.p9no { background: linear-gradient(135deg,#95A5A6,#B0BEC5); color: #fff; }
.p9resp { display: none; text-align: center; animation: fadein .8s ease-out; }
.p9resp.on { display: block; }
.p9rcard { background: linear-gradient(135deg,#FFE5D9,#FFD1DC); border-radius: 20px; padding: clamp(32px,8vw,48px) clamp(22px,6vw,38px); box-shadow: 0 14px 48px rgba(0,0,0,.19); }
.p9remoji { font-size: clamp(55px,14vw,76px); margin-bottom: 16px; animation: p9b 1s ease-in-out infinite; }
@keyframes p9b { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-13px)} }
.p9rmsg { font-size: clamp(15px,3.8vw,20px); color: #333; line-height: 1.8; margin-bottom: 28px; }
.p9rbtn { background: linear-gradient(135deg,#FF6B9D,#FFA07A); color: #fff; border: none; padding: clamp(13px,3.5vw,16px) clamp(32px,8vw,45px); border-radius: 50px; font-size: clamp(17px,4.5vw,21px); font-weight: 700; cursor: pointer; font-family: 'Kalam', cursive; }
</style>
</head>
<body>

<!-- Overlay -->
<div id="ov"></div>

<!-- ============================================================
     PAGE 1: LOADING
     ============================================================ -->
<div id="p1" class="page active">
  <div class="cloud c1"></div><div class="cloud c2"></div><div class="cloud c3"></div><div class="cloud c4"></div>
  <div class="plane">
    <svg viewBox="0 0 220 130" xmlns="http://www.w3.org/2000/svg">
      <ellipse cx="110" cy="70" rx="85" ry="38" fill="#FF69B4" stroke="#8B4C4C" stroke-width="3"/>
      <circle cx="50" cy="65" r="7" fill="#87CEEB" stroke="#8B4C4C" stroke-width="2"/>
      <circle cx="68" cy="65" r="7" fill="#87CEEB" stroke="#8B4C4C" stroke-width="2"/>
      <circle cx="86" cy="65" r="7" fill="#87CEEB" stroke="#8B4C4C" stroke-width="2"/>
      <circle cx="104" cy="65" r="7" fill="#87CEEB" stroke="#8B4C4C" stroke-width="2"/>
      <circle cx="122" cy="65" r="7" fill="#87CEEB" stroke="#8B4C4C" stroke-width="2"/>
      <circle cx="140" cy="65" r="7" fill="#87CEEB" stroke="#8B4C4C" stroke-width="2"/>
      <circle cx="158" cy="65" r="7" fill="#87CEEB" stroke="#8B4C4C" stroke-width="2"/>
      <text x="110" y="85" font-family="Arial" font-size="10" fill="white" text-anchor="middle" font-weight="bold">HELLO KITTY</text>
      <ellipse cx="100" cy="45" rx="45" ry="16" fill="#87CEEB" stroke="#8B4C4C" stroke-width="3"/>
      <ellipse cx="110" cy="95" rx="38" ry="14" fill="#87CEEB" stroke="#8B4C4C" stroke-width="3"/>
      <path d="M 180 70 Q 200 55 205 65 Q 200 75 180 70" fill="#FF85C1" stroke="#8B4C4C" stroke-width="3"/>
      <circle cx="80" cy="105" r="9" fill="#8B4C4C"/><circle cx="140" cy="105" r="9" fill="#8B4C4C"/>
      <g transform="translate(20,70)"><circle cx="0" cy="0" r="5" fill="#333"/>
        <ellipse cx="-15" cy="0" rx="15" ry="4" fill="#FFD700" stroke="#333" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 0 0" to="360 0 0" dur="0.2s" repeatCount="indefinite"/></ellipse>
        <ellipse cx="0" cy="-15" rx="4" ry="15" fill="#FFD700" stroke="#333" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 0 0" to="360 0 0" dur="0.2s" repeatCount="indefinite"/></ellipse>
      </g>
      <g transform="translate(130,25)">
        <ellipse cx="0" cy="0" rx="22" ry="20" fill="white" stroke="#333" stroke-width="2.5"/>
        <ellipse cx="-14" cy="-12" rx="8" ry="10" fill="white" stroke="#333" stroke-width="2.5"/>
        <ellipse cx="14" cy="-12" rx="8" ry="10" fill="white" stroke="#333" stroke-width="2.5"/>
        <ellipse cx="16" cy="-14" rx="11" ry="7" fill="#FF69B4" stroke="#333" stroke-width="2"/>
        <ellipse cx="16" cy="-14" rx="5" ry="3.5" fill="#FFB6D9" stroke="#333" stroke-width="1.5"/>
        <circle cx="-7" cy="-3" r="3" fill="#333"/><circle cx="7" cy="-3" r="3" fill="#333"/>
        <ellipse cx="0" cy="4" rx="3.5" ry="3" fill="#FFD700"/>
        <line x1="-22" y1="1" x2="-12" y2="0" stroke="#333" stroke-width="1.5"/>
        <line x1="-22" y1="5" x2="-12" y2="4" stroke="#333" stroke-width="1.5"/>
        <line x1="22" y1="1" x2="12" y2="0" stroke="#333" stroke-width="1.5"/>
        <line x1="22" y1="5" x2="12" y2="4" stroke="#333" stroke-width="1.5"/>
      </g>
    </svg>
  </div>
  <div class="p1txt"><span>Loading something special for Afrin ‚ú®</span></div>
</div>

<!-- PAGE 2 -->
<div id="p2" class="page">
  <div id="vp2"></div>
  <div class="p2box" style="margin:auto">
    <div style="position:relative;margin-bottom:18px"><div class="p2sun"></div><div class="p2wel">welcome to my little thought...</div></div>
    <div class="p2row"><span class="p2title">Hey Afrin</span><div class="p2hearts"><span class="p2h">üíï</span><span class="p2h" style="animation-delay:.3s">üíñ</span></div></div>
    <div class="p2card">
      <div class="p2dots"><div class="p2dot d1"></div><div class="p2dot d2"></div><div class="p2dot d3"></div></div>
      <div class="p2msg">I wanted to do a tiny something<br>because you mean a lot to me.</div>
      <div class="p2tap">Tap below, okay? ‚ú®</div>
      <button class="gbtn p2btn" onclick="go(3)">Open This üíù ‚Üí</button>
    </div>
  </div>
</div>

<!-- PAGE 3 -->
<div id="p3" class="page">
  <div id="vp3"></div>
  <div class="p3sun"></div>
  <div class="p3box" style="margin:auto">
    <div class="psp sp1">‚ú®</div><div class="psp sp2">‚ú®</div><div class="psp sp3">‚ú®</div><div class="psp sp4">‚ú®</div>
    <div class="p3sub">Straight from my heart</div>
    <div class="p3title">Something Special ‚ú®</div>
    <div class="p3card">
      <div class="pdh dh1">üíñ</div><div class="pdh dh2">üíï</div><div class="pdh dh3">üíù</div><div class="pdh dh4">üíó</div>
      <div class="p3icon">üíå</div>
      <div class="p3msg">I have something special to share with you...</div>
      <div class="p3click">Click to open</div>
      <button class="gbtn p3btn" onclick="go(4)">Just For You üíå</button>
    </div>
  </div>
</div>

<!-- PAGE 4 -->
<div id="p4" class="page">
  <div id="vp4"></div>
  <div class="p4wrap" style="margin:auto">
    <div class="p4hd"><div class="p4hdt">For The One Whose Smile<br>Changes My Mood</div><div class="p4title">A Birthday Note üíå</div></div>
    <div class="p4body">
      <div class="p4gr">Hey Afrin üéÄ</div>
      <div class="p4lt">Out of all the days in the year, today feels different.</div>
      <div class="p4lt">Because today is the day someone was born... who doesn't even realize how much light she carries.</div>
      <div class="p4lt">Your smile ‚Äî it's not just cute. It's the kind that quietly fixes bad days without trying.</div>
      <div class="p4lt">And I don't think you understand how rare that is.</div>
      <div class="p4lt">I'm not here to write the longest birthday wish. I just wanted to say something real.</div>
      <div class="p4lt">I hope this year gives you confidence when you doubt yourself, peace when things get loud, and happiness that doesn't depend on anyone.</div>
      <div class="p4lt">And if life allows... I hope I get to stand somewhere close to that happiness too.</div>
      <div class="p4wish" id="p4wish"><div class="p4wbt">Happy Birthday. üéÇ‚ú®</div></div>
      <div class="p4sig">‚Äî Someone Who Notices You<br>More Than You Think ‚ú®</div>
    </div>
    <button class="gbtn p4btn" onclick="go(5)">Continue üíï</button>
  </div>
</div>

<!-- PAGE 5 -->
<div id="p5" class="page">
  <div class="p5cc" id="p5cc"></div>
  <div id="p5bl"></div>
  <div class="p5box">
    <div class="p5sub">Time for something sweet...</div>
    <div class="p5title">It's Cake Time! üéÇ</div>
    <div class="p5cakewrap">
      <span style="position:absolute;font-size:28px;top:0;left:15%;animation:spa 2s ease-in-out infinite">‚ú®</span>
      <span style="position:absolute;font-size:28px;top:0;right:15%;animation:spa 2s ease-in-out .5s infinite">‚ú®</span>
      <span style="position:absolute;font-size:28px;bottom:0;left:10%;animation:spa 2s ease-in-out 1s infinite">‚ú®</span>
      <span style="position:absolute;font-size:28px;bottom:0;right:10%;animation:spa 2s ease-in-out 1.5s infinite">‚ú®</span>
      <div class="p5emoji">üéÇ</div>
    </div>
    <div class="p5msg">Let's celebrate with a special cake!</div>
    <button class="gbtn p5btn" onclick="go(6)">Let's Cut The Cake! üéâ</button>
  </div>
</div>

<!-- PAGE 6: CAKE CUTTING -->
<div id="p6" class="page">
  <div class="p6cc" id="p6cc"></div>
  <div class="p6instr"><div class="p6itxt" id="p6itxt">‚ú® Click the candles to blow them out! ‚ú®</div></div>
  <div class="p6scene">
    <div class="p6candlerow" id="p6cr"></div>
    <div class="p6cake" id="p6cake">
      <div class="p6frost"><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div></div>
      <div class="p6sline" id="p6sl"></div>
    </div>
    <div class="p6sbtn" id="p6sbtn" onclick="go(7)">üéÇ Continue ‚Üí</div>
  </div>
</div>

<!-- KNIFE: at body level, outside all pages, always accessible -->
<div id="knife">
    <svg viewBox="0 0 200 60" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="blg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#F0F0F0"/><stop offset="50%" style="stop-color:#E0E0E0"/><stop offset="100%" style="stop-color:#C0C0C0"/></linearGradient>
        <linearGradient id="hlg" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#D4AF37"/><stop offset="50%" style="stop-color:#F4E4C1"/><stop offset="100%" style="stop-color:#D4AF37"/></linearGradient>
      </defs>
      <ellipse cx="85" cy="55" rx="75" ry="7" fill="rgba(0,0,0,0.12)"/>
      <path d="M 10,30 L 130,15 L 135,30 L 130,45 L 10,30 Z" fill="url(#blg)" stroke="#A0A0A0" stroke-width="1.5"/>
      <path d="M 20,28 L 120,18 L 118,22 L 20,30 Z" fill="rgba(255,255,255,0.5)"/>
      <ellipse cx="150" cy="30" rx="40" ry="18" fill="url(#hlg)" stroke="#B8860B" stroke-width="2"/>
      <ellipse cx="150" cy="30" rx="35" ry="14" fill="none" stroke="#DAA520" stroke-width="1"/>
      <line x1="130" y1="26" x2="130" y2="34" stroke="#B8860B" stroke-width="1.5"/>
      <line x1="145" y1="24" x2="145" y2="36" stroke="#B8860B" stroke-width="1.5"/>
      <line x1="160" y1="26" x2="160" y2="34" stroke="#B8860B" stroke-width="1.5"/>
    </svg>
  </div>

<!-- PAGE 7: FLIP CARDS -->
<div id="p7" class="page">
  <div id="vp7" style="position:fixed;inset:0;pointer-events:none;z-index:1"></div>
  <div class="p7wrap">
    <div class="p7hd"><div class="p7sm">just saying...</div><div class="p7title">Little Things I Messed Up<br>(But Care About)</div><div class="p7hint">Tap to flip</div></div>
    <div class="p7cards">
      <!-- Card 1 -->
      <div class="p7cw"><div class="p7fc" onclick="flipCard(this)">
        <div class="p7face p7front cf1">
          <span class="p7sp sp1">‚ú®</span><span class="p7sp sp2">‚ú®</span><span class="p7sp sp3">‚ú®</span><span class="p7sp sp4">‚ú®</span>
          <svg class="p7ill" viewBox="0 0 200 200"><circle cx="100" cy="80" r="55" fill="white" stroke="#FFB6D9" stroke-width="2"/><circle cx="80" cy="75" r="8" fill="#333"/><circle cx="120" cy="75" r="8" fill="#333"/><ellipse cx="100" cy="90" rx="6" ry="7" fill="#FF69B4"/><path d="M 90,97 Q 100,107 110,97" stroke="#FF69B4" stroke-width="3" fill="none"/><circle cx="65" cy="80" r="11" fill="#FFB6D9" opacity="0.6"/><circle cx="135" cy="80" r="11" fill="#FFB6D9" opacity="0.6"/></svg>
          <div class="p7chint">Tap to reveal! üíï</div>
        </div>
        <div class="p7face p7back"><div class="p7cmsg">Happy Birthday to the girl who makes every day feel like a celebration! üéâüíï</div><button class="p7fbtn" onclick="event.stopPropagation();flipCard(this.closest('.p7fc'))">Flip back</button></div>
      </div></div>
      <!-- Card 2 -->
      <div class="p7cw"><div class="p7fc" onclick="flipCard(this)">
        <div class="p7face p7front cf2">
          <span class="p7sp sp1">‚≠ê</span><span class="p7sp sp2">‚≠ê</span><span class="p7sp sp3">‚≠ê</span><span class="p7sp sp4">‚≠ê</span>
          <svg class="p7ill" viewBox="0 0 200 200"><path d="M 100,20 L 115,70 L 170,75 L 125,110 L 140,165 L 100,135 L 60,165 L 75,110 L 30,75 L 85,70 Z" fill="#FFE082" stroke="#FFD700" stroke-width="3"/><circle cx="85" cy="80" r="8" fill="#333"/><circle cx="115" cy="80" r="8" fill="#333"/><path d="M 90,95 Q 100,105 110,95" stroke="#FF69B4" stroke-width="3" fill="none"/></svg>
          <div class="p7chint">Click me! üåü</div>
        </div>
        <div class="p7face p7back"><div class="p7cmsg">‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶®‡¶æ ‡¶π‡¶æ‡¶∏‡¶≤‡ßá ‡¶™‡ßÉ‡¶•‡¶ø‡¶¨‡ßÄ ‡¶ü‡¶æ ‡¶†‡¶ø‡¶ï ‡¶Æ‡¶§‡ßã run ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ, ‡¶Æ‡¶®‡ßá ‡¶π‡¶Ø‡¶º system error üíªüíï</div><button class="p7fbtn" onclick="event.stopPropagation();flipCard(this.closest('.p7fc'))">Flip back</button></div>
      </div></div>
      <!-- Card 3 -->
      <div class="p7cw"><div class="p7fc" onclick="flipCard(this)">
        <div class="p7face p7front cf3">
          <span class="p7sp sp1">üíú</span><span class="p7sp sp2">üíú</span><span class="p7sp sp3">üíú</span><span class="p7sp sp4">üíú</span>
          <svg class="p7ill" viewBox="0 0 200 200"><rect x="60" y="90" width="80" height="60" rx="5" fill="#FF69B4"/><rect x="60" y="90" width="80" height="14" fill="#FFB6D9"/><path d="M60,90 Q65,80 70,90 Q75,80 80,90 Q85,80 90,90 Q95,80 100,90 Q105,80 110,90 Q115,80 120,90 Q125,80 130,90 Q135,80 140,90" fill="white"/><rect x="95" y="52" width="10" height="38" fill="#FFE082"/><ellipse cx="100" cy="47" rx="8" ry="11" fill="#FFD700"/></svg>
          <div class="p7chint">Open me! üéÇ</div>
        </div>
        <div class="p7face p7back"><div class="p7cmsg">‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶ï‡¶∑‡ßç‡¶ü‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶™‡¶æ‡¶∞ ‡¶π‡¶≤‡ßã, ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¨‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶á, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶∂‡¶¨‡ßç‡¶¶‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ó‡¶≤‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶è‡¶∏‡ßá‡¶á ‡¶•‡ßá‡¶Æ‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º‡•§ üíî</div><button class="p7fbtn" onclick="event.stopPropagation();flipCard(this.closest('.p7fc'))">Flip back</button></div>
      </div></div>
    </div>
    <div class="p7nextbox"><button class="p7nbtn" onclick="go(8)">Continue to Next ‚Üí</button></div>
  </div>
</div>

<!-- PAGE 8: CATCH THE HEART -->
<div id="p8" class="page">
  <div class="p8top"><div class="p8itxt">Catch the heart to reveal your special message!</div></div>
  <div class="p8card" id="p8card"><div class="p8cz" id="p8cz"></div><div class="p8glow" id="p8glow"></div>
    <div class="p8heart" id="p8heart">
      <svg viewBox="0 0 100 100"><defs><linearGradient id="hgr" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#FF1744"/><stop offset="100%" style="stop-color:#F50057"/></linearGradient></defs><path d="M 50,85 C 20,60 10,45 10,32 Q 10,15 22,15 Q 35,15 50,30 Q 65,15 78,15 Q 90,15 90,32 C 90,45 80,60 50,85 Z" fill="url(#hgr)" stroke="#C41E3A" stroke-width="1.5"/></svg>
    </div>
  </div>
  <div class="p8helper"><p>Drag the heart into the center circle</p></div>
</div>

<!-- PAGE 9: FINAL LETTER -->
<div id="p9" class="page">
  <div id="vp9" style="position:fixed;inset:0;pointer-events:none;z-index:1"></div>
  <div class="p9wrap">
    <div id="p9lp">
      <div class="p9hd"><div class="p9sub">the grand finale...</div><div class="p9title">One Last Thing</div></div>
      <div class="p9card">
        <div class="p9ch"><div class="p9env">‚úâÔ∏è</div><div class="p9ctitle">Final Love Letter</div></div>
        <div class="p9content">
          <div class="p9gr">Hey Afrin,</div>
          <div class="p9lt">‡¶Ü‡¶ú ‡¶è‡¶á ‡¶ï‡¶•‡¶æ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶¨‡¶∏‡ßá ‡¶¨‡ßÅ‡¶ù‡¶≤‡¶æ‡¶Æ, ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶§‡¶ø ‡¶Ü‡¶∞ ‡¶ö‡ßÅ‡¶™ ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶®‡¶æ‡•§</div>
          <div class="p9lt">‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑ ‡¶π‡¶†‡¶æ‡ßé ‡¶ï‡¶∞‡ßá‡¶á ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶Ü‡¶∏‡ßá, ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶Ö‡¶¶‡ßç‡¶≠‡ßÅ‡¶§‡¶≠‡¶æ‡¶¨‡ßá ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º‡•§</div>
          <div class="p9lt">‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®‡¶ü‡¶æ ‡¶π‡¶Ø‡¶º‡¶§‡ßã ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶õ‡¶ø‡¶≤, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶∏‡ßá‡¶á ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶¶‡¶ø‡¶®‡¶ü‡¶æ‡¶á ‡¶ß‡ßÄ‡¶∞‡ßá ‡¶ß‡ßÄ‡¶∞‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡•§</div>
          <div class="p9lt">‡¶ï‡¶•‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶ï‡¶•‡¶æ, ‡¶õ‡ßã‡¶ü ‡¶õ‡ßã‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú, ‡¶π‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶Æ‡¶® ‡¶ñ‡¶æ‡¶∞‡¶æ‡¶™‡ßá‡¶∞ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‚Äî ‡¶∏‡¶¨ ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶è‡¶ï‡¶ú‡¶® ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑ ‡¶®‡¶æ, ‡¶è‡¶ï‡¶ü‡¶æ ‡¶Ö‡¶≠‡ßç‡¶Ø‡¶æ‡¶∏ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶õ‡ßã‡•§</div>
          <div class="p9lt">‡¶Ü‡¶Æ‡¶ø ‡¶ú‡¶æ‡¶®‡¶ø ‡¶®‡¶æ ‡¶ï‡¶ñ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶π‡¶æ‡¶∏‡¶ø‡¶ü‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Ö‡¶Ç‡¶∂ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶≤‡•§ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶è‡¶ü‡ßÅ‡¶ï‡ßÅ ‡¶ú‡¶æ‡¶®‡¶ø, ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶ø‡•§</div>
          <div class="p9lt">‡¶Ü‡¶Æ‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡¶§‡ßç‡¶Ø‡¶ø‡¶ü‡¶æ ‡¶¨‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶á‚Äî ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶ï‡¶∞‡¶ø, ‡¶ó‡¶≠‡ßÄ‡¶∞‡¶≠‡¶æ‡¶¨‡ßá‡•§</div>
          <div class="p9lt">‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶≤‡¶æ‡¶ó‡ßá, ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Æ‡¶®‡ßá ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶Ü‡¶®‡ßá‡•§</div>
          <div class="p9lt">‡¶è‡¶ü‡¶æ ‡¶π‡¶Ø‡¶º‡¶§‡ßã ‡¶™‡ßç‡¶∞‡ßá‡¶Æ‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ, ‡¶π‡¶Ø‡¶º‡¶§‡ßã ‡¶Ü‡¶∞‡¶ì ‡¶¨‡¶°‡¶º ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡¶®‡¶æ‡•§</div>
          <div class="p9lt">‡¶§‡¶æ‡¶á ‡¶Ü‡¶ú ‡¶ñ‡ßÅ‡¶¨ ‡¶∏‡¶∞‡¶≤ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ï‡¶∞‡¶õ‡¶ø‚Äî</div>
          <div class="p9lt" style="font-weight:700;color:#D04E3C;font-size:clamp(14px,3.8vw,18px)">‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶π‡¶æ‡¶§‡¶ü‡¶æ ‡¶ß‡¶∞‡¶¨‡ßá?<br>‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ï‡¶ø ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶è‡¶á ‡¶™‡¶•‡¶ü‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶¨‡ßã?</div>
        </div>
        <div class="p9btns">
          <button class="p9btn p9yes" onclick="p9y()">Yes üíï</button>
          <button class="p9btn p9no"  onclick="p9n()">No üå∏</button>
        </div>
      </div>
    </div>
    <div id="p9yr" class="p9resp"><div class="p9rcard"><div class="p9remoji">üíõ</div><div class="p9rmsg">‡¶è‡¶á ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‡¶ü‡¶æ ‡¶π‡¶Ø‡¶º‡¶§‡ßã ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‚Ä¶<br><br>‡¶Æ‡¶®‡ßá ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶•‡ßá‡¶Æ‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡•§ üíõ</div><button class="p9rbtn" onclick="go(1)">Restart üîÑ</button></div></div>
    <div id="p9nr" class="p9resp"><div class="p9rcard"><div class="p9remoji">üå∏</div><div class="p9rmsg">‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá, ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶¶‡ßç‡¶ß‡¶æ‡¶®‡ßç‡¶§‡¶ï‡ßá ‡¶™‡ßÅ‡¶∞‡ßã ‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß‡¶æ ‡¶ï‡¶∞‡¶ø‡•§<br><br>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶∂‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶¨‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§ üå∏</div><button class="p9rbtn" onclick="go(1)">Restart üîÑ</button></div></div>
  </div>
</div>

<!-- ============================================================
     JAVASCRIPT
     ============================================================ -->
<script>
/* ---- Navigation ---- */
let cur = 1;
const pageIds = ['p1','p2','p3','p4','p5','p6','p7','p8','p9'];

function go(n) {
  const ov = document.getElementById('ov');
  ov.classList.add('on');
  setTimeout(() => {
    document.getElementById(pageIds[cur-1]).classList.remove('active');
    cur = n;
    const pg = document.getElementById(pageIds[n-1]);
    pg.classList.add('active');
    pg.scrollTop = 0;
    ov.classList.remove('on');
    onEnter(n);
  }, 450);
}

function onEnter(n) {
  if (n===2) initP2();
  if (n===3) initP3();
  if (n===4) initP4();
  if (n===5) initP5();
  if (n===6) initP6();
  if (n===7) initP7();
  if (n===8) initP8();
  if (n===9) initP9();
}

/* Page 1 auto-advance */
setTimeout(() => go(2), 5000);

/* ---- P2 petals ---- */
function initP2() {
  const c = document.getElementById('vp2'); if (c.children.length) return;
  for (let i=0;i<14;i++) { const p=document.createElement('div'); p.style.cssText=`position:fixed;width:18px;height:26px;background:rgba(255,182,193,.6);border-radius:50% 0 50% 0;animation:fadein ${Math.random()*4+6}s infinite;left:${Math.random()*100}%;animation-delay:${Math.random()*5}s;pointer-events:none;z-index:1;top:-40px;animation-name:p2petal`; c.appendChild(p); }
  if (!document.getElementById('p2style')) { const s=document.createElement('style'); s.id='p2style'; s.textContent=`@keyframes p2petal{0%{transform:translateY(0) rotate(0);opacity:0}10%{opacity:.8}90%{opacity:.8}100%{transform:translateY(110vh) rotate(360deg);opacity:0}}`; document.head.appendChild(s); }
}

/* ---- P3 petals ---- */
function initP3() {
  const c = document.getElementById('vp3'); if (c.children.length) return;
  for (let i=0;i<18;i++) { const p=document.createElement('div'); p.style.cssText=`position:fixed;width:22px;height:30px;background:rgba(255,182,193,.7);border-radius:50% 0 50% 0;animation:p2petal ${Math.random()*4+6}s ${Math.random()*5}s infinite;left:${Math.random()*100}%;pointer-events:none;z-index:1;top:-50px`; c.appendChild(p); }
}

/* ---- P4 balloons ---- */
let p4iv = null;
function initP4() {
  const c = document.getElementById('vp4');
  if (!c.children.length) {
    for (let i=0;i<4;i++) { const b=document.createElement('div'); b.textContent='üéà'; b.style.cssText=`position:fixed;font-size:50px;opacity:.25;left:${i*25+5}%;animation:p2petal ${Math.random()*5+8}s ${Math.random()*3}s infinite;pointer-events:none;z-index:1;top:100vh`; c.appendChild(b); }
  }
  if (p4iv) clearInterval(p4iv);
  p4iv = setInterval(() => {
    const w = document.getElementById('p4wish'); if (!w) return;
    const b = document.createElement('div'); b.textContent='üéà';
    b.style.cssText=`position:absolute;font-size:28px;cursor:pointer;left:${Math.random()*75+10}%;bottom:-35px;animation:wbr ${Math.random()*3+3.5}s linear forwards;z-index:2`;
    if (!document.getElementById('wbrstyle')) { const s=document.createElement('style'); s.id='wbrstyle'; s.textContent=`@keyframes wbr{from{bottom:-35px;opacity:0}10%{opacity:1}to{bottom:120px;opacity:0}}`; document.head.appendChild(s); }
    b.addEventListener('click', function(){ this.style.animation='popp .3s ease-out forwards'; setTimeout(()=>this.remove(),300); });
    w.appendChild(b); setTimeout(()=>{ if(b.parentNode)b.remove(); },7000);
  }, 1000);
}

/* ---- P5 confetti ---- */
function initP5() {
  const cc = document.getElementById('p5cc'); if (cc.children.length) return;
  const cols=['#FFD700','#FF69B4','#87CEEB','#FFB6D9','#98FB98'];
  for (let i=0;i<50;i++) { const c=document.createElement('div'); c.style.cssText=`position:absolute;width:10px;height:10px;border-radius:2px;background:${cols[i%5]};left:${Math.random()*100}%;animation:p5cf ${Math.random()*3+3}s ${Math.random()*2}s linear infinite`; cc.appendChild(c); }
  if (!document.getElementById('p5style')) { const s=document.createElement('style'); s.id='p5style'; s.textContent=`@keyframes p5cf{from{transform:translateY(-100vh) rotate(0);opacity:1}to{transform:translateY(100vh) rotate(720deg);opacity:0}}`; document.head.appendChild(s); }
  const bl=document.getElementById('p5bl'); if (bl.children.length) return;
  for (let i=0;i<3;i++) { const b=document.createElement('div'); b.textContent='üéà'; b.style.cssText=`position:fixed;font-size:52px;left:${i*30+15}%;animation:p2petal ${Math.random()*4+6}s ${Math.random()*2}s infinite;pointer-events:none;z-index:5;top:100vh`; bl.appendChild(b); }
}

/* ========================================================
   PAGE 6 ‚Äî CAKE CUTTING  (FIX 2 implementation)
   ======================================================== */
let p6blown=0, p6allBlown=false, p6cut=false;
/* Knife drag state */
let kDrag=false, kSX=0, kSY=0, kCX=0, kCY=0;

function clampKnife(){
  return (window.innerWidth>=20?'10px':'8px');
}

function initP6() {
  p6blown=0; p6allBlown=false; p6cut=false; kDrag=false;

  /* floating hearts */
  let fl=document.getElementById('p6fl');
  if(!fl){ fl=document.createElement('div'); fl.id='p6fl'; fl.style.cssText='position:fixed;inset:0;pointer-events:none;z-index:1'; document.getElementById('p6').appendChild(fl); }
  fl.innerHTML='';
  for(let i=0;i<8;i++){ const h=document.createElement('div'); h.textContent='üíï'; h.style.cssText=`position:absolute;font-size:22px;opacity:.3;left:${Math.random()*100}%;animation:p2petal ${Math.random()*5+8}s ${Math.random()*5}s infinite;top:100vh`; fl.appendChild(h); }

  /* reset cake */
  const cake=document.getElementById('p6cake');
  cake.className='p6cake';
  cake.innerHTML=`<div class="p6frost"><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div></div><div class="p6sline" id="p6sl"></div>`;

  /* rebuild candles */
  const cr=document.getElementById('p6cr'); cr.innerHTML='';
  for(let i=0;i<3;i++){
    const cd=document.createElement('div'); cd.className='p6candle';
    cd.innerHTML='<div class="p6flame"></div><div class="p6stick"></div>';
    cd.addEventListener('click', function(){
      const fl=this.querySelector('.p6flame');
      if(fl.classList.contains('out')) return;
      fl.classList.add('out');
      p6blown++;
      const sm=document.createElement('div'); sm.className='p6smoke'; this.appendChild(sm);
      setTimeout(()=>sm.remove(),2000);
      if(p6blown===3 && !p6allBlown){ p6allBlown=true; setTimeout(showKnife,900); }
    });
    cr.appendChild(cd);
  }

  /* reset knife ‚Äî move to body so it's never trapped inside a hidden page */
  const kn=document.getElementById('knife');
  if(kn.parentNode !== document.body) document.body.appendChild(kn);
  kn.removeEventListener('mousedown', kStart);
  kn.removeEventListener('touchstart', kStart);
  kn.className='';
  kn.style.left='-320px';
  kn.style.top='50%';
  kn.style.transform='translateY(-50%)';
  kn.style.opacity='0';
  kn.style.pointerEvents='none';
  kn.style.transition='left 1.1s cubic-bezier(0.34,1.56,0.64,1), opacity 1.1s ease-out';
  kn.style.zIndex='99999';
  kn.style.display='block';
  kn.style.visibility='visible';

  /* reset surprise btn */
  const sb=document.getElementById('p6sbtn'); sb.className='p6sbtn';
  document.getElementById('p6itxt').textContent='‚ú® Click the candles to blow them out! ‚ú®';
}

function showKnife(){
  document.getElementById('p6itxt').textContent='üî™ Drag the knife across the cake to cut it! üéÇ';
  const kn=document.getElementById('knife');
  // Move knife to body so it's NOT inside the page div (which could be hidden)
  if(kn.parentNode !== document.body) document.body.appendChild(kn);
  kn.style.zIndex='99999';
  kn.style.display='block';
  kn.style.visibility='visible';
  kn.style.transition='left 1.1s cubic-bezier(0.34,1.56,0.64,1), opacity 1.1s ease-out';
  kn.style.opacity='1';
  kn.style.left=clampKnife();
  kn.style.pointerEvents='auto';
  kn.classList.add('show');

  /* Attach drag listeners to DOCUMENT so finger can move anywhere */
  kn.removeEventListener('mousedown', kStart);
  kn.removeEventListener('touchstart', kStart);
  kn.addEventListener('mousedown', kStart, {once:true});
  kn.addEventListener('touchstart', kStart, {passive:false, once:true});
}

function kStart(e){
  if(p6cut) return;
  kDrag=true;
  const kn=document.getElementById('knife');
  kn.classList.add('dragging');
  kn.style.transition='none';
  const t=e.touches?e.touches[0]:e;
  kSX=t.clientX; kSY=t.clientY;
  const r=kn.getBoundingClientRect();
  kCX=r.left; kCY=r.top;
  e.preventDefault();
  document.addEventListener('mousemove', kMove);
  document.addEventListener('mouseup', kEnd);
  document.addEventListener('touchmove', kMove, {passive:false});
  document.addEventListener('touchend', kEnd);
}

function kMove(e){
  if(!kDrag||p6cut) return;
  if(e.cancelable) e.preventDefault();
  const t=e.touches?e.touches[0]:e;
  const kn=document.getElementById('knife');
  const nx=kCX+(t.clientX-kSX);
  const ny=kCY+(t.clientY-kSY);
  kn.style.left=nx+'px';
  kn.style.top=ny+'px';
  kn.style.transform=`rotate(${(t.clientY-kSY)*.07}deg)`;
  checkCut(t.clientX, t.clientY);
}

function kEnd(){
  kDrag=false;
  document.removeEventListener('mousemove', kMove);
  document.removeEventListener('mouseup', kEnd);
  document.removeEventListener('touchmove', kMove);
  document.removeEventListener('touchend', kEnd);
  const kn=document.getElementById('knife');
  if(kn) kn.classList.remove('dragging');
}

function checkCut(x,y){
  if(p6cut) return;
  const cake=document.getElementById('p6cake');
  const r=cake.getBoundingClientRect();
  const cx=r.left+r.width/2;
  /* generous hit: within 55px of center X, and within cake height */
  if(Math.abs(x-cx)<55 && y>r.top-15 && y<r.bottom+15){ doCut(); }
}

function doCut(){
  if(p6cut) return; p6cut=true; kDrag=false;
  kEnd();
  const sl=document.getElementById('p6sl'); if(sl) sl.classList.add('on');
  setTimeout(()=>{
    const cake=document.getElementById('p6cake');
    cake.innerHTML=`<div class="p6half p6hl"><div class="p6frost"><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div></div></div><div class="p6half p6hr"><div class="p6frost"><div class="p6sc"></div><div class="p6sc"></div><div class="p6sc"></div></div></div>`;
    cake.classList.add('split','glow');
    const kn=document.getElementById('knife');
    kn.style.transition='opacity .5s, left .5s';
    kn.style.opacity='0';
    kn.style.left='-320px';
    kn.style.pointerEvents='none';
    setTimeout(()=>{
      doConfetti();
      document.getElementById('p6itxt').textContent='üéâ Happy Birthday Afrin! üéÇ';
      setTimeout(()=>{
        document.getElementById('p6sbtn').classList.add('show');
        setTimeout(()=>go(7), 3000); /* auto-advance after 3s */
      }, 1100);
    }, 650);
  }, 520);
}

function doConfetti(){
  const cols=['#FFB6D9','#FFD700','#87CEEB','#98FB98','#FFB347'];
  const cc=document.getElementById('p6cc');
  ['left','right'].forEach((side,si)=>{
    for(let i=0;i<35;i++) setTimeout(()=>{
      const c=document.createElement('div'); c.className='p6conf';
      c.style.background=cols[i%cols.length];
      c.style.left=side==='left'?'20%':'80%'; c.style.bottom='40%';
      const ang=side==='left'?-90-Math.random()*60:-30-Math.random()*60;
      const d=80+Math.random()*170;
      c.style.setProperty('--tx',Math.cos(ang*Math.PI/180)*d+'px');
      c.style.setProperty('--ty',Math.sin(ang*Math.PI/180)*d+'px');
      c.style.animation=`cburst ${1.7+Math.random()*2}s ease-out forwards`;
      cc.appendChild(c); setTimeout(()=>c.remove(),4000);
    }, i*16+si*75);
  });
}

/* ---- P7 floating hearts ---- */
function initP7(){
  const c=document.getElementById('vp7'); if(c.children.length) return;
  const hearts=['üíï','üíñ','üíó','üíì','üíù'];
  for(let i=0;i<10;i++){ const h=document.createElement('div'); h.textContent=hearts[i%5]; h.style.cssText=`position:absolute;font-size:18px;opacity:.35;left:${Math.random()*100}%;animation:p2petal ${Math.random()*5+8}s ${Math.random()*5}s infinite;top:100vh`; c.appendChild(h); }
}
function flipCard(card){ card.classList.toggle('flipped'); }

/* ---- P8 catch heart ---- */
let p8caught=false;
function initP8(){
  p8caught=false;
  const heart=document.getElementById('p8heart');
  const cz=document.getElementById('p8cz');
  const glow=document.getElementById('p8glow');
  const card=document.getElementById('p8card');
  heart.className='p8heart';
  heart.style.left='50%'; heart.style.top='50%';
  const rx=(Math.random()-.5)*85, ry=(Math.random()-.5)*85;
  heart.style.transform=`translate(calc(-50% + ${rx}px), calc(-50% + ${ry}px))`;
  glow.classList.remove('on'); cz.classList.remove('active');
  let drag=false,sx=0,sy=0;
  function ds(e){ if(p8caught)return; drag=true; heart.classList.add('dragging'); const t=e.touches?e.touches[0]:e; const r=heart.getBoundingClientRect(); sx=t.clientX-r.left; sy=t.clientY-r.top; e.preventDefault(); }
  function dm(e){ if(!drag||p8caught)return; e.preventDefault(); const t=e.touches?e.touches[0]:e; heart.style.left=(t.clientX-sx)+'px'; heart.style.top=(t.clientY-sy)+'px'; heart.style.transform='none'; const hr=heart.getBoundingClientRect(); const cr=card.getBoundingClientRect(); (inZone(hr,cr)?cz.classList.add:cz.classList.remove).call(cz,'active'); }
  function de(){ if(!drag||p8caught)return; drag=false; heart.classList.remove('dragging'); const hr=heart.getBoundingClientRect(); const cr=card.getBoundingClientRect(); if(inZone(hr,cr)) catchHeart(); }
  heart.addEventListener('mousedown',ds); document.addEventListener('mousemove',dm); document.addEventListener('mouseup',de);
  heart.addEventListener('touchstart',ds,{passive:false}); document.addEventListener('touchmove',dm,{passive:false}); document.addEventListener('touchend',de);
  heart.addEventListener('dragstart',e=>e.preventDefault());
}
function inZone(hr,cr){ const hcx=hr.left+hr.width/2,hcy=hr.top+hr.height/2,ccx=cr.left+cr.width/2,ccy=cr.top+cr.height/2; return Math.sqrt((hcx-ccx)**2+(hcy-ccy)**2)<68; }
function catchHeart(){ if(p8caught)return; p8caught=true; const h=document.getElementById('p8heart'); h.classList.add('caught'); document.getElementById('p8glow').classList.add('on'); h.style.left='50%'; h.style.top='50%'; h.style.transform='translate(-50%,-50%)'; setTimeout(()=>go(9),1300); }

/* ---- P9 petals ---- */
function initP9(){
  const c=document.getElementById('vp9'); if(c.children.length) return;
  for(let i=0;i<18;i++){ const p=document.createElement('div'); p.style.cssText=`position:absolute;width:13px;height:17px;background:rgba(255,182,193,.6);border-radius:50% 0 50% 0;left:${Math.random()*100}%;animation:p2petal ${Math.random()*5+8}s ${Math.random()*5}s infinite;top:-50px`; c.appendChild(p); }
}
function p9y(){ document.getElementById('p9lp').style.display='none'; document.getElementById('p9yr').classList.add('on'); document.getElementById('p9').scrollTop=0; }
function p9n(){ document.getElementById('p9lp').style.display='none'; document.getElementById('p9nr').classList.add('on'); document.getElementById('p9').scrollTop=0; }
</script>
</body>
</html>
